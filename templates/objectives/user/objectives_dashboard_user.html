{% extends 'layouts/base.html' %}
{% load static %}

{% block page_title %}Panel de Objetivos{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/forms.css' %}">
<link rel="stylesheet" href="{% static 'css/objectives.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="m-0">Objetivos</h1>
    <a href="{% url 'create_objective' %}" class="btn btn-primary">Crear objetivo</a>
  </div>

  <!-- Buscador (igual que solicitudes) -->
  <input type="search" id="objSearch" class="form-control search-bar" placeholder="Buscar por objetivos...">

  <!-- Tabs (mismas etiquetas y clases) -->
  <div class="tab-container mb-3">
    <div class="tab active" id="tab-mios">Mis objetivos</div>
    <div class="tab" id="tab-equipo">Mi equipo</div>
    <div class="tab" id="tab-general">General</div>
  </div>

  <!-- ===== MIS OBJETIVOS ===== -->
  <div id="contenedor-mios">
    <!-- KPIs en formato "form-list / form-item" para mantener el estilo -->
    <div class="form-list obj-kpis mb-3">
      <div class="form-item mb-3">
        <i class="form-icon bi bi-person-circle"></i>
        <div class="form-name">
          <div class="fw-semibold">Nombre del usuario</div>
          <small>cantidad de objetivos</small>
        </div>
      </div>

      <div class="form-item mb-3">
        <i class="form-icon bi bi-graph-up"></i>
        <div class="form-name">
          <div class="fw-semibold">Progreso</div>
          <small>0%</small>
        </div>
        <div class="form-actions obj-progress">
          <div class="progress">
            <div class="progress-bar" style="width:0%"></div>
          </div>
        </div>
      </div>
    </div>

    <!-- Controles secundarios (alineados al estilo de "Solicitudes") -->
    <div class="d-flex gap-2 mb-2">
      <div class="ms-auto"></div>
      <select class="form-select" style="max-width: 320px;">
        <option>Nuevo ciclo de objetivos Mensual</option>
        <option>Trimestral</option>
        <option>Semestral</option>
        <option>Anual</option>
      </select>
    </div>

    <div class="text-muted mb-2">Listado</div>

    <!-- Listado (mismas clases que "Solicitudes") -->
    <div class="form-list" id="list-mios">
      <!-- Item -->
      <div class="form-item mb-3" data-search="rotación inicio 22/10/2024 vence 01/01/2028 en progreso 50%">
        <i class="form-icon bi bi-bullseye"></i>
        <div class="form-name">
          <div class="fw-semibold">Rotación</div>
          <div class="text-muted" style="font-size:.85rem;">Inicio 22/10/2024 • Vence 01/01/2028</div>
        </div>
        <div class="form-actions d-flex align-items-center gap-3">
          <div class="text-end">
            <div class="text-muted" style="font-size:.8rem;line-height:1;">Peso</div>
            <div class="fw-semibold">50%</div>
          </div>
          <span class="status-chip">En progreso</span>
          <div class="obj-progress">
            <div class="progress">
              <div class="progress-bar" style="width:0%"></div>
            </div>
          </div>
          <a href="#" class="btn btn-outline-primary">Abrir</a>
        </div>
      </div>

      <!-- Item -->
      <div class="form-item mb-3" data-search="mi objetivo 1 inicio 22/10/2024 vence 01/01/2028 en progreso 50%">
        <i class="form-icon bi bi-bullseye"></i>
        <div class="form-name">
          <div class="fw-semibold">Mi objetivo 1</div>
          <div class="text-muted" style="font-size:.85rem;">Inicio 22/10/2024 • Vence 01/01/2028</div>
        </div>
        <div class="form-actions d-flex align-items-center gap-3">
          <div class="text-end">
            <div class="text-muted" style="font-size:.8rem;line-height:1;">Peso</div>
            <div class="fw-semibold">50%</div>
          </div>
          <span class="status-chip">En progreso</span>
          <div class="obj-progress">
            <div class="progress">
              <div class="progress-bar" style="width:0%"></div>
            </div>
          </div>
          <a href="#" class="btn btn-outline-primary">Abrir</a>
        </div>
      </div>

      <!-- Empty -->
      <div id="obj-empty" class="form-item mb-3 d-none">
        <i class="form-icon bi bi-bullseye"></i>
        <div class="form-name">Sin resultados.</div>
      </div>
    </div>
  </div>

  <!-- ===== MI EQUIPO (maqueta) ===== -->
  <div id="contenedor-equipo" style="display:none;">
    <div class="form-list">
      <div class="form-item mb-3">
        <i class="form-icon bi bi-people"></i>
        <div class="form-name">Aquí verás los objetivos de tu equipo.</div>
      </div>
    </div>
  </div>

  <!-- ===== GENERAL (maqueta) ===== -->
  <div id="contenedor-general" style="display:none;">
    <div class="form-list">
      <div class="form-item mb-3">
        <i class="form-icon bi bi-collection"></i>
        <div class="form-name">Resumen general de objetivos.</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'js/objectives.js' %}"></script>
{% endblock %}
