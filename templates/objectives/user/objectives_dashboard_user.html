{% extends 'layouts/base.html' %}
{% load static %}

{% block page_title %}Panel de Objetivos{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{% static 'css/forms.css' %}">
<link rel="stylesheet" href="{% static 'css/objectives.css' %}">
{% endblock %}

{% block content %}
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h1 class="m-0">Objetivos</h1>
  </div>

  <div class="d-flex align-items-center gap-2 flex-md-nowrap flex-wrap mb-3">
    <input
      id="objSearch"
      type="search"
      class="form-control search-bar flex-grow-1 flex-shrink-1"
      style="min-width:0"
      placeholder="Buscar por objetivos..."
      aria-label="Buscar objetivos">
    <a href="{% url 'create_objective' %}" class="btn btn-primary btn-lg ms-md-auto flex-shrink-0">
      Crear objetivo
    </a>
  </div>

  <!-- Tabs -->
  <div class="tab-container mb-3">
    <div class="tab active" id="tab-mios">Mis objetivos</div>
    <div class="tab" id="tab-equipo">Mi equipo</div>
    <div class="tab" id="tab-general">General</div>
  </div>

  <!-- ===== MIS OBJETIVOS ===== -->
  <div id="contenedor-mios">
    <!-- KPIs -->
    <div class="form-list obj-kpis mb-3">
      <div class="form-item mb-3">
        <i class="form-icon bi bi-person-circle"></i>
        <div class="form-name">
          <div class="fw-semibold">Nombre del usuario</div>
          <small>cantidad de objetivos</small>
        </div>
      </div>

      <div class="form-item mb-3">
        <i class="form-icon bi bi-graph-up"></i>
        <div class="form-name">
          <div class="fw-semibold">Progreso</div>
          <small>0%</small>
        </div>
        <div class="form-actions obj-progress">
          <div class="progress"><div class="progress-bar" style="width:0%"></div></div>
        </div>
      </div>
    </div>

    <!-- Select ciclo (a la derecha) -->
    <div class="d-flex align-items-center mb-2">
      <div class="ms-auto" style="min-width:220px; max-width:320px;">
        <select class="form-select form-select-lg w-100">
          <option>Mensual</option>
          <option>Trimestral</option>
          <option>Semestral</option>
          <option>Anual</option>
        </select>
      </div>
    </div>

    <!-- Listado vacío -->
    <div class="text-muted mb-2">Listado</div>
    <div class="form-list" id="list-mios">
      <div class="form-item mb-3" id="obj-empty">
        <i class="form-icon bi bi-bullseye"></i>
        <div class="form-name">
          <div class="text-muted" style="font-size:.9rem;">Aquí verás tus objetivos.</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- ===== MI EQUIPO ===== -->
  <div id="contenedor-equipo" style="display:none;">
    <div class="form-list" id="list-equipo">
      <div class="form-item mb-3">
        <i class="form-icon bi bi-people"></i>
        <div class="form-name">Aquí verás los objetivos de tu equipo.</div>
      </div>
    </div>
  </div>

  <!-- ===== GENERAL ===== -->
  <div id="contenedor-general" style="display:none;">
    <div class="form-list" id="list-general">
      <div class="form-item mb-3">
        <i class="form-icon bi bi-collection"></i>
        <div class="form-name">Resumen general de objetivos.</div>
      </div>
    </div>
  </div>
</div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'js/objectives.js' %}"></script>
{% endblock %}
