{% load static %}
{% block styles %}
<link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
{% endblock %} 

<nav id="sidebar" class="sidebar js-sidebar">
    <div class="sidebar-content" style="height: auto; overflow-y: auto; overflow-x: hidden;">
        <a class="sidebar-brand" href="{% url 'home' %}">
            <img src="{% static "template/img/logos/ISOLOGO.png" %}" class="avatar img-fluid rounded me-1" alt="Logo" style="width: 300px; height: auto; ">
        </a>

        <ul class="sidebar-nav">
            {% if perms.monitoring.Modulo_monitoreo %}
                <li class="sidebar-item {% if 'monitoring' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'monitoring_view' %}">
                        <i class="fa-solid fa-id-card"></i><span class="align-middle">Monitoreo</span>
                    </a>
                </li>
            {% endif %}
            
            {% if  perms.users.Modulo_usuarios %}
                <li class="sidebar-item {% if 'user' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'user_dashboard' %}">
                        <i class="fa-solid fa-user"></i>
                        <span class="align-middle">
                            Usuarios
                            {% with notif_module_counts.usuarios as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if user.is_staff or user.first_name == "Jose Bernardo"%} {% endcomment %}
            {% comment %} {% if not user.is_staff or perms.news.Modulo_noticias %} {% endcomment %}
            {% if perms.news.Modulo_noticias %}
                <li class="sidebar-item {% if 'news' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'news_view' %}">
                        <i class="fa-solid fa-newspaper"></i>
                        <span class="align-middle">
                            Noticias
                            {% with notif_module_counts.noticias as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% if not user.is_staff or perms.recognitions.Modulo_comunicados %}
                <li class="sidebar-item {% if 'recognition' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'recognition_dashboard' %}">
                        <i class="fa-solid fa-award"></i>
                        <span class="align-middle">
                            Comunicados
                            {% with notif_module_counts.comunicados as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% if not user.is_staff or perms.forms_requests.Modulo_constancias %}
                <li class="sidebar-item {% if 'request' in request.resolver_match.url_name or 'forms' in request.resolver_match.url_name or 'constancia' in request.resolver_match.url_name or 'guarderia' in request.resolver_match.url_name or 'carta' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'request_form' %}">
                        <i class="fa-brands fa-wpforms"></i>
                        <span class="align-middle">
                            Solicitud de constancias
                            {% with notif_module_counts.constancias as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% if not user.is_staff or perms.surveys.Modulo_encuestas %}
                <li class="sidebar-item {% if 'survey' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'survey_dashboard' %}">
                        <i class="fa-solid fa-square-poll-vertical"></i>
                        <span class="align-middle">
                            Encuestas
                            {% with notif_module_counts.encuestas as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}
            
            {% if perms.courses.Modulo_cursos %}
                <li class="sidebar-item">
                <a class="sidebar-link" href="{% url 'performance' %}">
                    <i class="fa-solid fa-list-check"></i>
                    <span class="align-middle">
                    Evaluación de desempeño
                    {% with notif_module_counts.encuestas as c %}
                        {% if c %}
                        <span class="badge bg-danger ms-1">{{ c }}</span>
                        {% endif %}
                    {% endwith %}
                    </span>
                </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.courses.Modulo_cursos %} {% endcomment %}
            {% if perms.courses.Modulo_cursos %}
                <li class="sidebar-item {% if 'course' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'course_wizard' %}">
                        <i class="fa-solid fa-graduation-cap"></i>
                        <span class="align-middle">
                            Cursos
                            {% with notif_module_counts.cursos as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.org_chart.Modulo_organigrama %} {% endcomment %}
            {% if perms.org_chart.Modulo_organigrama %}
                <li class="sidebar-item {% if 'org_chart' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'org_chart' %}">
                        <i class="fa-solid fa-sitemap"></i>
                        <span class="align-middle">
                            Organigrama
                            {% with notif_module_counts.organigrama as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.vacations.Modulo_vacaciones %} {% endcomment %}
            {% if perms.vacations.Modulo_vacaciones %}
                <li class="sidebar-item {% if 'vacation' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'vacation_dashboard' %}">
                        <i class="fa-solid fa-calendar-days"></i>
                        <span class="align-middle">
                            Vacaciones y permisos
                            {% with notif_module_counts.vacaciones as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.objectives.Modulo_objetivos %} {% endcomment %}
            {% if perms.objectives.Modulo_objetivos %}
                <li class="sidebar-item {% if 'objective' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'objective_view' %}">
                        <i class="fa-solid fa-bullseye"></i>
                        <span class="align-middle">
                            Objetivos
                            {% with notif_module_counts.objetivos as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.archive.view_archive %} {% endcomment %}
            {% if perms.archive.view_archive %}
                <li class="sidebar-item {% if 'archive' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'archive_dashboard' %}">
                        <i class="fa-solid fa-folder"></i>
                        <span class="align-middle">
                            Archivo
                            {% with notif_module_counts.archivo as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.onboarding.view_onboardingtask %} {% endcomment %}
            {% if perms.onboarding.view_onboardingtask %}
                <li class="sidebar-item {% if 'onboarding' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'onboarding_dashboard' %}">
                        <i class="fa-solid fa-user-plus"></i>
                        <span class="align-middle">
                            Onboarding
                            {% with notif_module_counts.onboarding as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% if user.is_superuser %}
                <li class="sidebar-item {% if 'document' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'document_dashboard' %}">
                        <i class="fa-solid fa-folder-open"></i>
                        <span class="align-middle">
                            Mis documentos
                            {% with notif_module_counts.mis_documentos as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}
                
                
            {% comment %} {% if not user.is_staff or perms.job_offers.view_joboffer %} {% endcomment %}
            {% if perms.job_offers.view_joboffer %}
                <li class="sidebar-item {% if 'job' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'job_offers_dashboard' %}">
                        <i class="fa-solid fa-briefcase"></i>
                        <span class="align-middle">
                            Vacantes
                            {% with notif_module_counts.vacantes as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.policies.view_policy %} {% endcomment %}
            {% if perms.policies.view_policy %}    
                <li class="sidebar-item {% if 'policies' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'policies_dashboard_view' %}">
                        <i class="fa-solid fa-landmark"></i>
                        <span class="align-middle">
                            Políticas internas
                            {% with notif_module_counts.politicas as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if not user.is_staff or perms.career.view_careerplan %} {% endcomment %}
            {% if perms.career.view_careerplan %}
                <li class="sidebar-item {% if 'career' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'career_plan_dashboard' %}">
                        <i class="fa-solid fa-road"></i>
                        <span class="align-middle">
                            Plan de carrera
                            {% with notif_module_counts.plan_carrera as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% comment %} {% if perms.staff_requisitions.add_staffrequisition or perms.staff_requisitions.view_staffrequisition %} {% endcomment %}
            {% if perms.staff_requisitions.view_staffrequisition %}
                <li class="sidebar-item {% if 'staff' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link" href="{% url 'staff_requisitions_home' %}">
                        <i class="fa-solid fa-user-tie"></i>
                        <span class="align-middle">
                            Requisición de personal
                            {% with notif_module_counts.requisiciones as c %}
                                {% if c %}
                                    <span class="badge bg-danger ms-1">{{ c }}</span>
                                {% endif %}
                            {% endwith %}
                        </span>
                    </a>
                </li>
            {% endif %}

            {% if not user.is_staff or perms.tools.Modulo_herramientas %}
                <li class="sidebar-item {% if 'calculator' in request.resolver_match.url_name %}active{% endif %}">
                    <a class="sidebar-link d-flex justify-content-between align-items-center {% if 'calculator' not in request.resolver_match.url_name %}collapsed{% endif %}"
                       data-bs-toggle="collapse" 
                       data-bs-target="#menu-tools" 
                       href="#menu-tools"
                       role="button" 
                       aria-expanded="{% if 'calculator' in request.resolver_match.url_name %}true{% else %}false{% endif %}" 
                       aria-controls="menu-tools">
                        <span><i class="fa-solid fa-screwdriver-wrench me-2"></i>Herramientas</span>
                        <i class="fa-solid fa-chevron-down small"></i>
                    </a>

                    <div class="collapse submenu {% if 'calculator' in request.resolver_match.url_name %}show{% endif %}" id="menu-tools">
                        <ul class="list-unstyled ps-4 py-2 m-0">
                            <li class="sidebar-item {% if 'calculator' in request.resolver_match.url_name %}active{% endif %}">
                                <a class="sidebar-link" href="{% url 'calculator_view' %}">
                                    <i class="fa-solid fa-calculator me-2"></i> Calculadora de préstamo
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
             {% endif %}

        </div>
    </nav>
    
{% block scripts %}
  <script src="{% static 'js/sidebar.js' %}"></script>
{% endblock %}